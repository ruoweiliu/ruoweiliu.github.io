{% include base_path %}

{% if post.id %}
  {% assign title = post.title | markdownify | remove: "<p>" | remove: "</p>" %}
{% else %}
  {% assign title = post.title %}
{% endif %}

<div class="{{ include.type | default: "list" }}__item">
  <article class="archive__item" itemscope itemtype="http://schema.org/CreativeWork">
    
    <h3 class="archive__item-title" itemprop="headline">
      {% if post.link %}
        <a href="{{ post.link }}">{{ title }}</a>
      {% else %}
        <a href="{{ base_path }}{{ post.url }}" rel="permalink">{{ title }}</a>
      {% endif %}
    </h3>

    <!-- Authors -->
    {% if post.authors %}
      <p class="archive__item-authors">
        {{ post.authors }}
      </p>
    {% endif %}

    <!-- Venue and Date -->
    {% if post.venue %}
      <p class="archive__item-venue">
        <i>{{ post.venue }}</i>
        {% if post.date %}
          , {{ post.date | default: "1900-01-01" | date: "%Y" }}
        {% endif %}
      </p>
    {% endif %}

    <!-- Buttons for ABS, ARXIV, BIB -->
    <p class="archive__item-buttons">
      {% if post.pdfurl %}
        <button class="btn btn--small">
          <a href="{{ post.pdfurl }}">PDF</a>
        </button>
      {% endif %}
      {% if post.arxivurl %}
        <button class="btn btn--small">
          <a href="{{ post.arxivurl }}">ARXIV</a>
        </button>
      {% endif %}
      {% if post.bibtexurl %}
        <button class="btn btn--small">
          <a href="{{ post.bibtexurl }}">BIB</a>
        </button>
      {% endif %}
      {% if post.paperurl and not post.pdfurl %}
        <button class="btn btn--small">
          <a href="{{ post.paperurl }}">PAPER</a>
        </button>
      {% endif %}
    </p>

    <!-- Abstract/Excerpt -->
    {% if post.excerpt and site.read_more != 'enabled' %}
      <p class="archive__item-excerpt" itemprop="description">{{ post.excerpt | markdownify }}</p>
    {% elsif post.excerpt and site.read_more == 'enabled' %}
      <p class="archive__item-excerpt" itemprop="description"><p>{{ post.excerpt | markdownify | remove: '<p>' | remove: '</p>' }}<strong><a href="{{ base_path }}{{ post.url }}" rel="permalink"> Read more</a></strong></p></p>
    {% endif %}

  </article>
</div>
